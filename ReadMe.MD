### 关于过滤器的说明

- 用户的过滤器后缀： us  (customer)   登陆模块：lous

- 商户的过滤器后缀： bu  (business)   登陆模块：lobu

- 管理员的过滤器后缀：ro  (role)      登陆模块：loro

商户和用户有一个公用的模块：PayServlet    公共后缀：pubus

管理员和用户有一个公用的模块：EditAddressServlet    公共后缀：pubro

### 三个受众的主目录

- 用户   /front      入口：/front/login.jsp

- 商户   /Shop       入口：/Shop/login.jsp

- 管理员 /Admin      入口：/Admin/login.jsp

### 可能出现的问题

1. 部署在Tomcat环境下，可能会出现用户提交订单上传文件或更换头像时找不到路径上传失败的情况，解决方案是：在项目部署的主目录下自己创建文件夹/upload/assert

2. 在使用过程中，可能会出现部分用户头像是一张加载失败的图片，原因是/upload/assert/路径下没有该用户的头像图片，重新设置用户的头像，或在数据库中将该用户头像所在路劲设为 null 即可

### 还没有解决的问题

1. 用户条件下，在不更换个人头像的情况下修改个人信息是失败的，原因是layui组件中的文件上传组件绑定了按钮，而该按钮并没有绑定其他onclick事件或提交表单。解决方案分为两种

    1. （操作比较复杂，但处理方式正确）重写用户个人信息维护模块，将头像更换操作部分与其他信息维护分离开来，头像更换模块只负责用户头像的更换，其他信息维护只负责维护其他信息，不涉及文件上传
    
    2. （操作更简单，但缺陷大）在个人信息维护的JSP页面中，写一个 onclick() 事件，用来处理其他信息的提交，其缺陷是在用户同时进行更换头像和其他信息维护同时进行时，会出现提交两次的情况，这样做不仅耗时，还极其脑残
    
~~2. 404错误页和500错误页并没有设定，在用户操作错误的情况下出现的页面会导致用户体验极差~~

3. 商户条件下，没有做订单的搜索模块

~~4. 管理员条件下，无法监控用户的在线状态，原因是在用户登录时，没有对数据表 tbl_cu_state 中的 customer_state 进行更改（在线为1 离线为0）~~

~~5. (失败，无法修改，最后解决)管理员条件下，用户移入移出小黑屋无法实时更新状态（该bug可暂时不解决）~~

6. 管理员条件下，用户和商户的地址管理没有做成弹出页地区联动的状态，具体思路为：在原先的地址填写栏后增加页面，进行地区联动，当选择完成之后，将选取的结果返回到原地址填写窗口

7. 商户方条件下，商户头像更换模块没有完成，具体思路是layui弹出层（通过点击头像或在商户信息维护页面增加头像更换模块）

8. 商户方首页统计，具体方案是使用mysql中的count()函数来返回订单数量和所有订单收款在的总和

9. 平台管理方，用户方，商家管理方登陆联动，当管理员禁止用户（商家）登陆时，用户（商家）的状态被更新为不可登陆，且在线状态更改为离线

10. 可以在平台管理方增加系统反馈模块，数据库中增加留言表，主要负责接受用户和商家的反馈

~~11. 商户方和用户方订单列表应按倒序排列（近期订单）~~

12. 用户方可以增加订单搜索功能

~~13. 商户方订单管理界面移除checkbox~~

14. 后台管理员增加登陆后首页跳转servlet

~~15. 后台管理员订单管理界面移除checkbox~~

~~16. 管理员未登陆情况下，用户不能修改地址的问题~~

~~17. (失败，无法修改，最后解决)对于公共模块，拦截器是必须要拦截下载未登陆的用户的，具体操作思路为：if(顾客session！=null||管理员session！=null)就允许通过过滤器~~

18. 订单表中的收货时间，创建时间尽量改为datetime这种精确时间的类型

19. 商家端更新信息后在/Shop/in/index.jsp中未做到商家负责人，电话号码等信息的刷新，解决方法参照用户更新信息

~~20. 用户更新信息后会弹出alert（1）~~

~~20. 用户首页后会弹出alert（）~~

~~21. 用户首页头像大小不同时的拉伸问题~~